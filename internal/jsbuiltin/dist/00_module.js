const global=globalThis||this;{const removeShebangLine=data=>{if("string"!=typeof data)throw new Error("unexpected input: "+data);return data.startsWith("#!")?data.replace(/^#![^\n]*/,""):data},isHttpUrl=s=>/^https?:\/\//gi.test(s),resolveWithExtension=name=>{var extension=[".json",".js"];if(fs.exist(name)){if(!fs.stat(name).isdir)return name;var pkgFile=path.join(name,"package.json");if(fs.exist(pkgFile)){pkgFile=loadModuleFromJsonContent(pkgFile,fs.readfile(pkgFile));if(pkgFile.main)return resolveWithExtension(path.join(name,pkgFile.main))}var indexFile=path.join(name,"index");if(fs.exist(indexFile))return indexFile;for(const ext of extension)if(fs.exist(indexFile+ext))return indexFile+ext}else{for(const ext of extension)if(fs.exist(name+ext))return name+ext;const indexFile=path.join(name,"index");if(fs.exist(indexFile))return indexFile;for(const ext of extension)if(fs.exist(indexFile+ext))return indexFile+ext}},resolveModulePath=(name,dir)=>{var ret;if("."===name||name.startsWith("/")||name.startsWith("./"))return isHttpUrl(dir)?path.abs(path.join(dir,name)):(ret=resolveWithExtension(path.join(dir,name)))?path.abs(ret):path.abs(name);if(isHttpUrl(name))return name;var paths=[];let d=dir;for(;;){var p=path.abs(path.join(d,"node_modules")),p=(paths.push(p),path.dir(d));if(p===d)break;d=p}for(const p of paths){const ret=resolveWithExtension(path.join(p,name));if(ret)return path.abs(ret)}},requiremodule=(name,dir=__dirname)=>{if("string"!=typeof name)throw new TypeError("module name expected string type");if(!name)throw new TypeError("empty module name");if(!dir)throw new TypeError("empty module dir");var file=resolveModulePath(name,dir);if(!file)throw new Error(`cannot resolve module "${name}" on path "${dir}"`);if(require.cache[file])return require.cache[file];try{let content="";if(isHttpUrl(file)){var res=http.get(file);if(200===res.status)content=res.body;else{var res2=http.get(file+".js");if(200!==res2.status)throw new Error(`http get "${file}" status "${res.status}"`);content=res2.body}}else content=fs.readfile(file);return file.endsWith(".json")?loadModuleFromJsonContent(file):loadModuleFromJsContent(file,path.dir(file),content)}catch(err){dir=new Error(`cannot load module "${name}": ${err.message}
`+err.stack);throw dir.moduleName=name,dir.resolvedFilename=file,dir.originError=err,dir}},loadModuleFromJsonContent=(filename,content)=>require.cache[filename]=JSON.parse(content),loadModuleFromJsContent=(filename,dirname,content)=>{content=`
(function (require, module, __dirname, __filename) { var exports = module.exports; ${content=removeShebangLine(content)}
return module;
})(function require(name) {
  return requiremodule(name, "${dirname}");
}, {exports:{},parent:this}, "${dirname}", "${filename}")
`.trimLeft();return require.cache[__filename]=evalfile(__filename,content).exports},require=name=>requiremodule(name,__dirname);require.cache={},global.require=require,global.requiremodule=requiremodule}
